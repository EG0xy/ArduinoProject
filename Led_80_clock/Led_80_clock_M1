#include "ClickButton.h"
#include <DS1302.h>
DS1302 rtc(A5, A4, A3);
Time t;

int latchPin = 13; 
int clockPin = 12; 
int dataPin = 11; 

ClickButton ba(A0, LOW, CLICKBTN_PULLUP);
ClickButton bb(A1, LOW, CLICKBTN_PULLUP);
ClickButton bc(A2, LOW, CLICKBTN_PULLUP);


int counter=1; // counter for multiplexing switch

unsigned long t1=0; // timer for multiplexing switch
unsigned long t2=0;

boolean leda[]={1,1,1,1,1,1,1,1}; //(1,11,21,31,41,51,61,71)
boolean ledb[]={1,1,1,1,1,1,1,1}; //(2,12,22,32,42,52,62,72)
boolean ledc[]={1,1,1,1,1,1,1,1}; //(3,13,23,33,43,53,63,73)
boolean ledd[]={1,1,1,1,1,1,1,1}; //(4,14,24,34,44,54,64,74)
boolean lede[]={1,1,1,1,1,1,1,1}; //(5,15,25,35,45,55,65,75)
boolean ledf[]={1,1,1,1,1,1,1,1}; //(6,16,26,36,46,56,66,76)
boolean ledg[]={1,1,1,1,1,1,1,1}; //(7,17,27,37,47,57,67,77)
boolean ledh[]={1,1,1,1,1,1,1,1}; //(10,20,30,40,50,60,70,80)

byte  led1=B11111111;
byte  led2=B11111111;
byte  led3=B11111111;
byte  led4=B11111111;
byte  led5=B11111111;
byte  led6=B11111111;
byte  led7=B11111111;
byte  led8=B11111111;
byte  led9=B11111111;
byte led10=B11111111;
//==================================================================================

void setup() {
 
  pinMode(latchPin, OUTPUT);
  pinMode(clockPin, OUTPUT);
  pinMode(dataPin, OUTPUT);
  
 pinMode(1, OUTPUT);
 pinMode(2, OUTPUT);
 pinMode(3, OUTPUT);
 pinMode(4, OUTPUT);
 pinMode(5, OUTPUT);
 pinMode(6, OUTPUT);
 pinMode(7, OUTPUT);
 pinMode(8, OUTPUT);
 pinMode(9, OUTPUT);
 pinMode(10, OUTPUT);
   
    digitalWrite(1,HIGH);      
    digitalWrite(2,HIGH);   
    digitalWrite(3,HIGH);      
    digitalWrite(4,HIGH);   
    digitalWrite(5,HIGH);      
    digitalWrite(6,HIGH);      
    digitalWrite(7,HIGH);      
    digitalWrite(8,HIGH);   
    digitalWrite(9,HIGH);      
    digitalWrite(10,HIGH);      
    
  ba.multiclickTime = 50;
  bb.multiclickTime = 50; 
  bc.multiclickTime = 50;   
  
 
}

void loop() {
  
t = rtc.getTime();  
ba.Update();
bb.Update(); 
bc.Update();  

  

  led1=B01010101;
  
   
  
  
 

;   
    
 //=======================================================
 t1=millis();
  if (t1-t2>=1){
    
     counter++;
    if(counter==9) counter=1;
 
  if (counter==1){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00000001); 
    digitalWrite(latchPin, HIGH); 
    digitalWrite(1, bitRead(led1, 7));
  }   
  
  if (counter==2){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00000010); 
    digitalWrite(latchPin, HIGH);  
   digitalWrite(1, bitRead(led1, 6));           
  }   

  if (counter==3){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00000100); 
    digitalWrite(latchPin, HIGH); 
    digitalWrite(1, bitRead(led1, 5));      
  }   

  if (counter==4){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00001000); 
    digitalWrite(latchPin, HIGH); 
    digitalWrite(1, bitRead(led1, 4));     
  }   

  if (counter==5){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00010000); 
    digitalWrite(latchPin, HIGH);  
    digitalWrite(1, bitRead(led1, 3));      
  }   

  if (counter==6){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B00100000); 
    digitalWrite(latchPin, HIGH);   
    digitalWrite(1, bitRead(led1, 2));      
  }   

  if (counter==7){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B01000000); 
    digitalWrite(latchPin, HIGH);  
    digitalWrite(1,bitRead(led1, 1));       
  }   

  if (counter==8){
 
    digitalWrite(latchPin,LOW); 
    shiftOut(dataPin, clockPin, MSBFIRST ,B10000000); 
    digitalWrite(latchPin, HIGH); 
    digitalWrite(1,bitRead(led1, 0));        
  }   

  t2=t1;
  }
  
 //=======================================================   


    
  

}
